.MODEL SMALL

.STACK 100h

.DATA
a1 DW 0
a2 DW 0
TV0 DW 0
TV1 DW 0
TV2 DW 0
TV3 DW 0
TV4 DW 0
TV5 DW 0
TV6 DW 0
TV7 DW 0
a3 DW 0
b3 DW 0
x3 DW 0
TV8 DW 0
TV9 DW 0
TV10 DW 0
TV11 DW 0
TV12 DW 0
TV13 DW 0
TV14 DW 0
TV15 DW 0
TV16 DW 0
a4 DW 0
b4 DW 0
x4 DW 0
TV17 DW 0
TV18 DW 0
TV19 DW 0
TV20 DW 0
TV21 DW 0
TV22 DW 0
TV23 DW 0
TV24 DW 0
TV25 DW 0
TV26 DW 0
TV27 DW 0
TV28 DW 0
TV29 DW 0
TV30 DW 0
TV31 DW 0
TV32 DW 0
TV33 DW 0
TV34 DW 0
TV35 DW 0
TV36 DW 0
TV37 DW 0
TV38 DW 0
TV39 DW 0
TV40 DW 0
TV41 DW 0
TV42 DW 0
TV43 DW 0
TV44 DW 0
TV45 DW 0
TV46 DW 0
TV47 DW 0
TV48 DW 0
TV49 DW 0
TV50 DW 0
TV51 DW 0
TV52 DW 0
TV53 DW 0
TV54 DW 0
TV55 DW 0
TV56 DW 0
TV57 DW 0
TV58 DW 0
TV59 DW 0
TV60 DW 0
TV61 DW 0
TV62 DW 0
TV63 DW 0
TV64 DW 0
TV65 DW 0
TV66 DW 0
TV67 DW 0
TV68 DW 0
TV69 DW 0
TV70 DW 0
TV71 DW 0
TV72 DW 0
TV73 DW 0
TV74 DW 0
TV75 DW 0
TV76 DW 0
TV77 DW 0
TV78 DW 0
TV79 DW 0
TV80 DW 0
TV81 DW 0
TV82 DW 0
TV83 DW 0
TV84 DW 0
TV85 DW 0
TV86 DW 0
TV87 DW 0
TV88 DW 0
TV89 DW 0
TV90 DW 0
TV91 DW 0
TV92 DW 0
TV93 DW 0
TV94 DW 0
TV95 DW 0
TV96 DW 0
TV97 DW 0
TV98 DW 0
TV99 DW 0
TV100 DW 0
TV101 DW 0
TV102 DW 0
TV103 DW 0
TV104 DW 0
x10 DW 0
TV105 DW 0
TV106 DW 0
TV107 DW 0
TV108 DW 0
TV109 DW 0
TV110 DW 0
c4 DW 5 DUP (0)

.CODE

ASMOUT PROC 
POP TV110
POP TV109 
PUSH AX 
PUSH BX 
PUSH CX 
PUSH DX 
PUSH SP 
PUSH BP 
PUSH SI 
PUSH DI 			 
PUSHF 
CMP TV109, 0 
JGE NOT_NEG3 
MOV AH, 2 
MOV DL, '-' 
INT 21h 
NEG TV109 
NOT_NEG3: 
CMP TV109 , 0 
JNE NOT_ZERO 			  
MOV AH, 2 
MOV DL, '0' 
INT 21h 
NOT_ZERO: 
MOV AX, '#' 
PUSH AX 
OUTPUT_LOOP1: 
CMP TV109 , 0 			   
JE END_OUTPUT_LOOP1 
MOV BX, 10 
MOV DX, 0 
MOV AX, TV109  
IDIV BX 
PUSH DX 
MOV TV109 , AX 
JMP OUTPUT_LOOP1 			    
END_OUTPUT_LOOP1: 
OUTPUT_LOOP2: 
POP BX 
CMP BX, '#' 
JE END_OUTPUT_LOOP2 
ADD BX, '0' 
MOV AH, 2 			     
MOV DL, BL 
INT 21h 
JMP OUTPUT_LOOP2 
END_OUTPUT_LOOP2: 
MOV AH, 2 
MOV DL, 0Dh 
INT 21h 
MOV DL, 0Ah 			      
INT 21h 

POPF 
POP DI 
POP SI 
POP BP 
POP SP 
POP DX 
POP CX 
POP BX 
POP AX 
PUSH TV110 
RET 
ASMOUT ENDP 

 
f PROC 
POP TV6 
POP a2
 
PUSH AX 
PUSH BX 
PUSH CX 
PUSH DX 
PUSH SP 
PUSH BP 										
PUSH SI 
PUSH DI 
PUSHF 
PUSH TV6 
MOV TV0, 2
 
MOV AX, a2 
MOV TV1, AX 
 
MOV AX, TV0 
MUL TV1
MOV TV2, AX 
 
MOV DX, TV2 
RET 
 
MOV TV3, 1
 
MOV AX, TV3 
NEG AX 
MOV TV4, AX 
 
PUSH TV4 
call ASMOUT 
 
 
MOV TV5, 9
 
MOV AX, TV5 
MOV a2, AX 
 
 
RET 
f ENDP 
 
g PROC 
POP TV15 
POP b3
POP a3
 
PUSH AX 
PUSH BX 
PUSH CX 
PUSH DX 
PUSH SP 
PUSH BP 										
PUSH SI 
PUSH DI 
PUSHF 
PUSH TV15 
 
MOV AX, a3 
MOV TV8, AX 
 
PUSH TV8 
 
call f 
MOV TV9, DX 
POPF 
POP DI 
POP SI 
POP BP 
POP SP 
POP DX 
POP CX 
POP BX 
POP AX 
MOV AX, a3 
MOV TV10, AX 
 
MOV BX, TV9 
ADD BX, TV10 
MOV TV11, BX 
 
MOV AX, b3 
MOV TV12, AX 
 
MOV BX, TV11 
ADD BX, TV12 
MOV TV13, BX 
 
MOV AX, TV13 
MOV x3, AX 
 
 
MOV AX, x3 
MOV TV14, AX 
 
MOV DX, TV14 
RET 
 
 
RET 
g ENDP 
 
 
 
MAIN PROC 
MOV DX, @DATA 
MOV DS, DX 
 
MOV TV17, 5
 
MOV AX, TV17 
MOV a4, AX 
 
 
MOV TV18, 7
 
MOV AX, TV18 
MOV b4, AX 
 
 
MOV AX, a4 
MOV TV19, AX 
 
PUSH TV19 
 
MOV AX, b4 
MOV TV20, AX 
 
PUSH TV20 
 
call g 
MOV TV21, DX 
POPF 
POP DI 
POP SI 
POP BP 
POP SP 
POP DX 
POP CX 
POP BX 
POP AX 
MOV AX, TV21 
MOV x4, AX 
 
 
MOV AX, x4 
MOV TV22, AX 
 
PUSH TV22 
call ASMOUT 
 
 
MOV AX, a4 
MOV TV23, AX 
 
MOV AX, b4 
MOV TV24, AX 
 
MOV BX, TV23 
ADD BX, TV24 
MOV TV25, BX 
 
PUSH TV25 
call ASMOUT 
 
 
MOV AX, a4 
MOV TV26, AX 
 
MOV AX, b4 
MOV TV27, AX 
 
MOV BX, TV26 
SUB BX, TV27 
MOV TV28, BX 
 
PUSH TV28 
call ASMOUT 
 
 
MOV AX, a4 
MOV TV29, AX 
 
MOV AX, b4 
MOV TV30, AX 
 
MOV AX, TV29 
MUL TV30
MOV TV31, AX 
 
PUSH TV31 
call ASMOUT 
 
 
MOV AX, a4 
MOV TV32, AX 
 
MOV AX, b4 
MOV TV33, AX 
 
MOV AX, TV32 
MOV BX, TV33 
DIV BL
XOR AH, AH 
MOV TV34, AX 
 
PUSH TV34 
call ASMOUT 
 
 
MOV AX, a4 
MOV TV35, AX 
 
MOV AX, b4 
MOV TV36, AX 
 
MOV AX, TV35 
MOV BX, TV36 
DIV BL
MOV AL, AH 
XOR AH, AH 
MOV TV37, AX 
 
PUSH TV37 
call ASMOUT 
 
 
MOV TV38, 0
 
MOV AX, TV38 
MOV b4, AX 
 
 
MOV AX, a4 
MOV TV39, AX 
 
MOV AX, b4 
MOV TV40, AX 
 
MOV AX, TV39 
CMP AX, 0 
 JE LB0 
MOV AX, TV40 
CMP AX, 0 
 JE LB0 
MOV AX, 1 
JMP LB2 
LB0: 
MOV AX, 0 
LB2: 
MOV TV41, AX 
 
PUSH TV41 
call ASMOUT 
 
 
MOV AX, a4 
MOV TV42, AX 
 
MOV AX, b4 
MOV TV43, AX 
 
MOV AX, TV42 
CMP AX, 0 
 JNE LB4 
MOV AX, TV43 
CMP AX, 0 
 JNE LB4 
MOV AX, 0 
JMP LB5 
LB4: 
MOV AX, 1 
LB5: 
MOV TV44, AX 
 
PUSH TV44 
call ASMOUT 
 
 
 
 
MOV TV46, 4
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, TV46 
MOV SI[BX], CX
 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV48, CX
 
PUSH TV48 
 
call f 
MOV TV49, DX 
POPF 
POP DI 
POP SI 
POP BP 
POP SP 
POP DX 
POP CX 
POP BX 
POP AX 
PUSH TV49 
call ASMOUT 
 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV51, CX 
INC CX 
MOV SI[BX], CX 
 
 
MOV TV53, 6
 
LEA SI, c4 
MOV BX, 1 
ADD BX, 1 
MOV CX, TV53 
MOV SI[BX], CX
 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV55, CX
 
LEA SI, c4 
MOV BX, 1 
ADD BX, 1 
MOV CX, SI[BX] 
MOV TV57, CX
 
MOV AX, TV55 
MUL TV57
MOV TV58, AX 
 
PUSH TV58 
call ASMOUT 
 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV60, CX
 
LEA SI, c4 
MOV BX, 1 
ADD BX, 1 
MOV CX, SI[BX] 
MOV TV62, CX
 
MOV AX, TV60 
CMP AX, TV62 
JG LB6 
MOV AX, 0 
JMP LB7
LB6: 
MOV AX, 1 
LB7: 
MOV TV63, AX 

CMP TV63, 0 
JNZ LB8 
MOV TV64, 1 
JMP LB9 
LB8: 
MOV TV64, 0 
LB9: 
 
PUSH TV64 
call ASMOUT 
 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV66, CX

CMP TV66, 0 
JNZ LB10 
MOV TV67, 1 
JMP LB11 
LB10: 
MOV TV67, 0 
LB11: 
 
PUSH TV67 
call ASMOUT 
 
 
MOV TV68, 0
 
MOV AX, TV68 
MOV b4, AX 
 
LB14: 
MOV AX, b4 
MOV TV69, AX 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV71, CX
 
MOV AX, TV69 
CMP AX, TV71 
JLE LB12 
MOV AX, 0 
JMP LB13
LB12: 
MOV AX, 1 
LB13: 
MOV TV72, AX 
 
CMP TV72, 0 
JZ LB15 
MOV AX, b4 
MOV TV74, AX 
 
PUSH TV74 
call ASMOUT 
 
MOV AX, b4 
MOV TV73, AX 
INC b4 
 
JMP LB14 
LB15: 
 
 
 
call h 
MOV TV75, DX 
POPF 
POP DI 
POP SI 
POP BP 
POP SP 
POP DX 
POP CX 
POP BX 
POP AX 
 
MOV TV76, 0
 
MOV AX, TV76 
MOV b4, AX 
 
 
LB18: 
MOV AX, b4 
MOV TV77, AX 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV79, CX
 
MOV AX, TV77 
CMP AX, TV79 
JL LB16 
MOV AX, 0 
JMP LB17
LB16: 
MOV AX, 1 
LB17: 
MOV TV80, AX 
 
CMP TV80, 0 
JZ LB19 
MOV AX, b4 
MOV TV81, AX 
 
PUSH TV81 
call ASMOUT 
 
MOV AX, b4 
MOV TV82, AX 
 
MOV TV83, 2
 
MOV BX, TV82 
ADD BX, TV83 
MOV TV84, BX 
 
MOV AX, TV84 
MOV b4, AX 
 
 
JMP LB18 
LB19: 
 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV86, CX
 
MOV TV87, 6
 
MOV AX, TV86 
CMP AX, TV87 
JGE LB20 
MOV AX, 0 
JMP LB21
LB20: 
MOV AX, 1 
LB21: 
MOV TV88, AX 
 
CMP TV88, 0 
JE LB22 
MOV TV89, 1
 
PUSH TV89 
call ASMOUT 
 
 JMP LB23 
LB22: 
MOV TV90, 2
 
PUSH TV90 
call ASMOUT 
 
 LB23: 
 
 
MOV TV91, 0
 
MOV AX, TV91 
MOV b4, AX 
 
LB30: 
MOV AX, b4 
MOV TV92, AX 
 
LEA SI, c4 
MOV BX, 2 
ADD BX, 2 
MOV CX, SI[BX] 
MOV TV94, CX
 
MOV AX, TV92 
CMP AX, TV94 
JL LB24 
MOV AX, 0 
JMP LB25
LB24: 
MOV AX, 1 
LB25: 
MOV TV95, AX 
 
CMP TV95, 0 
JZ LB31 
MOV TV97, 0
 
MOV AX, TV97 
MOV x4, AX 
 
LB28: 
MOV AX, x4 
MOV TV98, AX 
 
MOV TV99, 2
 
MOV AX, TV98 
CMP AX, TV99 
JL LB26 
MOV AX, 0 
JMP LB27
LB26: 
MOV AX, 1 
LB27: 
MOV TV100, AX 
 
CMP TV100, 0 
JZ LB29 
MOV AX, b4 
MOV TV101, AX 
 
MOV AX, x4 
MOV TV102, AX 
 
MOV AX, TV101 
MUL TV102
MOV TV103, AX 
 
PUSH TV103 
call ASMOUT 
 
MOV AX, x4 
MOV TV104, AX 
INC x4 
 
 
JMP LB28 
LB29: 
 
 
MOV AX, b4 
MOV TV96, AX 
INC b4 
 
JMP LB30 
LB31: 
 
 
MOV AH, 4Ch 
INT 21h 
MAIN ENDP  
 
h PROC 
POP TV108 
PUSH AX 
PUSH BX 
PUSH CX 
PUSH DX 										
PUSH SP 
PUSH BP 
PUSH SI 
PUSH DI 
PUSHF 
PUSH TV108 
 
MOV TV105, 2
 
MOV AX, TV105 
MOV x10, AX 
 
 
MOV AX, x10 
MOV TV106, AX 
 
MOV AX, TV106 
NEG AX 
MOV TV107, AX 
 
PUSH TV107 
call ASMOUT 
 
 
RET 
h ENDP 


END MAIN
